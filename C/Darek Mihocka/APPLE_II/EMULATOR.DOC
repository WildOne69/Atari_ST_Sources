

 Documentation for the Apple ][ A2.04 and Atari B1.01 versions of the

                    6502 EMULATOR ON THE ATARI ST
                           Dec. 31, 1986


                         by Darek Mihocka

     The emulators work on any ST with a minimum of 512K,  and  works
in any resolution,  colour or monochrome. It can be used as a tool to 
learn 6502 machine language,  but also, it allows the ST to run Apple 
and Atari software.

Files in the APPLE.ARC file:

  - APPLE.TOS     (the emulator)
  - EMULATOR.DOC  (this file)
  - CONVERT.C     (source code for a Apple to ST file conversion)
  - DEMO.BIN      (a demo program in Basic)
  - DEMOZP.BIN    (zero page locations to make DEMO work)

     It is up to the user to create files called APPLSOFT.BIN and
INTBASIC.BIN by transfering the two languages over to the ST. Both
occupy memory locations $D000-$FFFF.

Files in the ATARI800.ARC file:

  - ATARI800.TOS  (the emulator)
  - EMULATOR.DOC  (this file)

     It is up to the user to create file called OSB.BIN which is a
binary file in DOS 2.0 format of the memory locations $A000-$FFFF.

DOS 2.0 format is $FF,$FF, start(lo), (hi), end (lo), (hi)
followed by the actual binary data.

     The only software in the machine at load time is the monitor. 
It  is  similar to the monitor found on Commodore PETs  and  Apple 
][s. All commands are one character long, followed by any required 
parameters. The following is a command summary with examples:

       : - change contents of memory 
               :12 34 56 puts 34 in 12 and 56 in 13

       B - boot virtual computer          
          
       D - display memory 
               D 0000 0028 displays all memory from 00 to 28

       G - go to address
               G 1234 starts executing at address 1234

       H - hardcopy control
               H1 turns on printer output
               H0 turns it off

       I - index of files on disk

       L - disassemble memory
               L 3456 disassembles from 3456

       M - move memory block
               M 4500 45FF 5600 moves 256 bytes from 4500 to 5600

       R - read binary file
               R BASIC loads a file called BASIC into memory
               format of file is $FF,$FF, start, end, data

       S - single step 

       T - trace

       V - view video output screen

       W - write binary file
               W 1200 19FF TESTFILE

       X - exit

A  more  detailed command summary can be found in the  monitor  by 
pressing the HELP key.

     Using  two modems,  you can download the operating  system  from 
the Apple  to  the  ST.  If  you convert it  into  a  Atari  Dos  2.0 
compatible file,  that is,  a 6 byte header containing $FF,$FF, start 
address,  end address,  you can load it into the emulator with the  R 
command.
    
     To transfer a program you load it into your Apple, and do a hex
by modem to the ST. What you must transfer is a dump generated by the
Apple monitor and it must be in the format that appears on the screen
normally. You can modify the file CONVERT.C to change the format. Then
compile CONVERT.C to CONVERT.TTP and type in the file name to convert
and the new filename ending in .BIN.

     To  see  a real demonstration of the  emulator,  load  Applesoft 
Basic by typing "R APPLSOFT" and hit RETURN,  then boot it by  typing 
"B" and hit RETURN.  You will now be in an Apple ][ virtual computer. 
Type "CALL 768".  Then load a program, e.g. "R DEMO" and "R DEMOZP".
Then type "B" and hit return. The virtual computer should now have a
demo program in memory.
The  editing,  Basic,  the  machine language monitor,  and  even  the 
graphics  are similar.  Most public domain software can similarly  be 
copied over a null cable, and will execute on the emulator.

     To exit,  you must generate a software interrupt by executing 
a  BRK  instruction.   For  example,   typing  "CALL  40000"  will 
accomplish that.

     I know that these docs aren't too great but I'm uploading it long
distance and don't want send over a novel!

 - Darek Mihocka     MegaBaud ST BBS 416-243-9519

